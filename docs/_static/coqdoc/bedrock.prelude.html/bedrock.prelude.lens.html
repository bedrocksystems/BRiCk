<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="../../css/coqdocjs/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="../../css/coqdocjs/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../js/coqdocjs/config.js"></script>
<script type="text/javascript" src="../../js/coqdocjs/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <!-- NOTE: These are displayed right to left on the page -->
    <span class="right">
      <a href="./indexpage.html"> Index for the theory </a>
      <a href="./toc.html"> Table of contents for the theory </a>
      <a href="../../../index.html"> Toplevel </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">bedrock.prelude.lens</h1>

<div class="code">
<span class="comment">(*<br/>
&nbsp;*&nbsp;Copyright&nbsp;(C)&nbsp;2021-2022&nbsp;BedRock&nbsp;Systems,&nbsp;Inc.<br/>
&nbsp;*&nbsp;All&nbsp;rights&nbsp;reserved.<br/>
&nbsp;*<br/>
&nbsp;*&nbsp;This&nbsp;software&nbsp;is&nbsp;distributed&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;BedRock&nbsp;Open-Source&nbsp;License.<br/>
&nbsp;*&nbsp;See&nbsp;the&nbsp;LICENSE-BedRock&nbsp;file&nbsp;in&nbsp;the&nbsp;repository&nbsp;root&nbsp;for&nbsp;details.<br/>
&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
This defines several useful lenses.
Some of them, however, do not satisfy all lens laws ("fake lenses").

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">elpi.apps.NES.NES</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.prelude.base.html#"><span class="id" title="library">bedrock.prelude.base</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.prelude.finite.html#"><span class="id" title="library">bedrock.prelude.finite</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.prelude.functions.html#"><span class="id" title="library">bedrock.prelude.functions</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span> <span class="id" title="library">Lens.Lens</span>.<br/>

<br/>
<span class="id" title="keyword">Export</span> <span class="id" title="module">LensNotations</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">lens_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="_bit" class="idref" href="#_bit"><span class="id" title="definition">_bit</span></a> (<a id="n:1" class="idref" href="#n:1"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Numbers.BinNums.html#N"><span class="id" title="inductive">N</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;{| <span class="id" title="projection">view</span> := <span class="id" title="keyword">fun</span> <a id="x:2" class="idref" href="#x:2"><span class="id" title="binder">x</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.NArith.BinNat.html#N.testbit"><span class="id" title="definition">N.testbit</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:2"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.prelude.lens.html#n:1"><span class="id" title="variable">n</span></a><br/>
&nbsp;&nbsp;&nbsp;; <span class="id" title="projection">over</span> := <span class="id" title="keyword">fun</span> (<a id="f:3" class="idref" href="#f:3"><span class="id" title="binder">f</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="x:4" class="idref" href="#x:4"><span class="id" title="binder">x</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="bedrock.prelude.lens.html#f:3"><span class="id" title="variable">f</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.NArith.BinNat.html#N.testbit"><span class="id" title="definition">N.testbit</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:4"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.prelude.lens.html#n:1"><span class="id" title="variable">n</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.NArith.BinNat.html#N.setbit"><span class="id" title="definition">N.setbit</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:4"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.prelude.lens.html#n:1"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.NArith.BinNat.html#N.clearbit"><span class="id" title="definition">N.clearbit</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:4"><span class="id" title="variable">x</span></a> <a class="idref" href="bedrock.prelude.lens.html#n:1"><span class="id" title="variable">n</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="f232366969ab1aed85b1fb147da786d6" class="idref" href="#f232366969ab1aed85b1fb147da786d6"><span class="id" title="notation">&quot;</span></a>X ~l&gt; Y" := (<span class="id" title="var">X</span> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <span class="id" title="var">Y</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99, <span class="id" title="var">Y</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">type_scope</span>.<br/>
</div>

<div class="doc">
^^ Notation to be used for "partial" lenses that do <i>not</i> respect lens laws.
Their existence is controversial, but inconvenient to avoid without supporting more optics.

</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;XXX&nbsp;To&nbsp;upstream&nbsp;somewhere;&nbsp;it&nbsp;belongs&nbsp;upstream&nbsp;and/or&nbsp;in&nbsp;rocq-lens.&nbsp;*)</span><br/>
#[<span class="id" title="var">local</span>] <span class="id" title="var">Arguments</span> <span class="id" title="constructor">Build_Lens</span> {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>}.<br/>

<br/>
<a id="lens_aux_1" class="idref" href="#lens_aux_1"><span class="id" title="module"><span id="lens_aux_1.lens" class="id">NES.Begin</span></span></a> <a id="lens_aux_1" class="idref" href="#lens_aux_1"><span class="id" title="module"><span id="lens_aux_1.lens" class="id">lens</span></span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lens_aux_1.lens.of_get_set" class="idref" href="#lens_aux_1.lens.of_get_set"><span class="id" title="definition">of_get_set</span></a> {<a id="s:5" class="idref" href="#s:5"><span class="id" title="binder">s</span></a> <a id="t:6" class="idref" href="#t:6"><span class="id" title="binder">t</span></a> <a id="a:7" class="idref" href="#a:7"><span class="id" title="binder">a</span></a> <a id="b:8" class="idref" href="#b:8"><span class="id" title="binder">b</span></a>} (<a id="get:9" class="idref" href="#get:9"><span class="id" title="binder">get</span></a> : <a class="idref" href="bedrock.prelude.lens.html#s:5"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#a:7"><span class="id" title="variable">a</span></a>) (<a id="set:10" class="idref" href="#set:10"><span class="id" title="binder">set</span></a> : <a class="idref" href="bedrock.prelude.lens.html#s:5"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#b:8"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#t:6"><span class="id" title="variable">t</span></a>) : <span class="id" title="record">Lens</span> <a class="idref" href="bedrock.prelude.lens.html#s:5"><span class="id" title="variable">s</span></a> <a class="idref" href="bedrock.prelude.lens.html#t:6"><span class="id" title="variable">t</span></a> <a class="idref" href="bedrock.prelude.lens.html#a:7"><span class="id" title="variable">a</span></a> <a class="idref" href="bedrock.prelude.lens.html#b:8"><span class="id" title="variable">b</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">Build_Lens</span> <a class="idref" href="bedrock.prelude.lens.html#get:9"><span class="id" title="variable">get</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">位</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="upd:11" class="idref" href="#upd:11"><span class="id" title="binder">upd</span></a> : <a class="idref" href="bedrock.prelude.lens.html#a:7"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#b:8"><span class="id" title="variable">b</span></a>) (<a id="x:12" class="idref" href="#x:12"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.prelude.lens.html#s:5"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a> <a class="idref" href="bedrock.prelude.lens.html#set:10"><span class="id" title="variable">set</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:12"><span class="id" title="variable">x</span></a> (<a class="idref" href="bedrock.prelude.lens.html#upd:11"><span class="id" title="variable">upd</span></a> (<a class="idref" href="bedrock.prelude.lens.html#get:9"><span class="id" title="variable">get</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:12"><span class="id" title="variable">x</span></a>))).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;For&nbsp;this&nbsp;to&nbsp;produce&nbsp;a&nbsp;lawful&nbsp;lens,&nbsp;it&nbsp;suffices&nbsp;that&nbsp;<span class="inlinecode"><span class="id" title="var">get</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="var">put</span></span>&nbsp;are<br/>
&nbsp;&nbsp;inverses,&nbsp;as&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">iso2lens</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lens_aux_1.lens.of_get_put" class="idref" href="#lens_aux_1.lens.of_get_put"><span class="id" title="definition">of_get_put</span></a> {<a id="X:13" class="idref" href="#X:13"><span class="id" title="binder">X</span></a> <a id="Y:14" class="idref" href="#Y:14"><span class="id" title="binder">Y</span></a>} (<a id="get:15" class="idref" href="#get:15"><span class="id" title="binder">get</span></a> : <a class="idref" href="bedrock.prelude.lens.html#X:13"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#Y:14"><span class="id" title="variable">Y</span></a>) (<a id="put:16" class="idref" href="#put:16"><span class="id" title="binder">put</span></a> : <a class="idref" href="bedrock.prelude.lens.html#Y:14"><span class="id" title="variable">Y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#X:13"><span class="id" title="variable">X</span></a>) : <a class="idref" href="bedrock.prelude.lens.html#X:13"><span class="id" title="variable">X</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <a class="idref" href="bedrock.prelude.lens.html#Y:14"><span class="id" title="variable">Y</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.lens.html#lens_aux_1.lens.of_get_set"><span class="id" title="definition">of_get_set</span></a> <a class="idref" href="bedrock.prelude.lens.html#get:15"><span class="id" title="variable">get</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.prelude.lens.html#put:16"><span class="id" title="variable">put</span></a>).<br/>
<span class="id" title="var">NES.End</span> <span class="id" title="var">lens</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="_id" class="idref" href="#_id"><span class="id" title="definition">_id</span></a> {<a id="A:17" class="idref" href="#A:17"><span class="id" title="binder">A</span></a>} : <a class="idref" href="bedrock.prelude.lens.html#A:17"><span class="id" title="variable">A</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <a class="idref" href="bedrock.prelude.lens.html#A:17"><span class="id" title="variable">A</span></a> := <a class="idref" href="bedrock.prelude.lens.html#of_get_put"><span class="id" title="definition">lens.of_get_put</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="_fst" class="idref" href="#_fst"><span class="id" title="definition">_fst</span></a> {<a id="A:18" class="idref" href="#A:18"><span class="id" title="binder">A</span></a> <a id="B:19" class="idref" href="#B:19"><span class="id" title="binder">B</span></a>} : <a class="idref" href="bedrock.prelude.lens.html#A:18"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.prelude.lens.html#B:19"><span class="id" title="variable">B</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <a class="idref" href="bedrock.prelude.lens.html#A:18"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;{| <span class="id" title="projection">view</span> := <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>; <span class="id" title="projection">over</span> <a id="f:20" class="idref" href="#f:20"><span class="id" title="binder">f</span></a> <a id="p:21" class="idref" href="#p:21"><span class="id" title="binder">p</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.prelude.lens.html#f:20"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.prelude.lens.html#p:21"><span class="id" title="variable">p</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#:::x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.lens.html#p:21"><span class="id" title="variable">p</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#:::x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> |}.<br/>
<span class="id" title="keyword">Definition</span> <a id="_snd" class="idref" href="#_snd"><span class="id" title="definition">_snd</span></a> {<a id="A:22" class="idref" href="#A:22"><span class="id" title="binder">A</span></a> <a id="B:23" class="idref" href="#B:23"><span class="id" title="binder">B</span></a>} : <a class="idref" href="bedrock.prelude.lens.html#A:22"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="bedrock.prelude.lens.html#B:23"><span class="id" title="variable">B</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <a class="idref" href="bedrock.prelude.lens.html#B:23"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;{| <span class="id" title="projection">view</span> := <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>; <span class="id" title="projection">over</span> <a id="f:24" class="idref" href="#f:24"><span class="id" title="binder">f</span></a> <a id="p:25" class="idref" href="#p:25"><span class="id" title="binder">p</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.prelude.lens.html#p:25"><span class="id" title="variable">p</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#:::x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.lens.html#f:24"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.prelude.lens.html#p:25"><span class="id" title="variable">p</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#:::x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> |}.<br/>
<span class="id" title="keyword">Definition</span> <a id="_const" class="idref" href="#_const"><span class="id" title="definition">_const</span></a> {<a id="A:26" class="idref" href="#A:26"><span class="id" title="binder">A</span></a> <a id="B:27" class="idref" href="#B:27"><span class="id" title="binder">B</span></a>} (<a id="b:28" class="idref" href="#b:28"><span class="id" title="binder">b</span></a> : <a class="idref" href="bedrock.prelude.lens.html#B:27"><span class="id" title="variable">B</span></a>) : <a class="idref" href="bedrock.prelude.lens.html#A:26"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.prelude.lens.html#f232366969ab1aed85b1fb147da786d6"><span class="id" title="notation">~</span></a><a class="idref" href="bedrock.prelude.lens.html#f232366969ab1aed85b1fb147da786d6"><span class="id" title="notation">l</span></a><a class="idref" href="bedrock.prelude.lens.html#f232366969ab1aed85b1fb147da786d6"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#B:27"><span class="id" title="variable">B</span></a> := <span class="id" title="constructor">Build_Lens</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Program.Basics.html#const"><span class="id" title="definition">const</span></a> <a class="idref" href="bedrock.prelude.lens.html#b:28"><span class="id" title="variable">b</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">位</span></a> <span class="id" title="var">_</span> <a id="a:29" class="idref" href="#a:29"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.lens.html#a:29"><span class="id" title="variable">a</span></a>).<br/>
<span class="comment">(*&nbsp;For&nbsp;this&nbsp;lens&nbsp;to&nbsp;be&nbsp;lawful,&nbsp;it&nbsp;suffices&nbsp;that&nbsp;<span class="inlinecode"><span class="id" title="var">get</span></span>&nbsp;and&nbsp;<span class="inlinecode"><span class="id" title="tactic">set</span></span>&nbsp;are&nbsp;inverses&nbsp;on&nbsp;the<br/>
image&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">l</span>.(<span class="id" title="tactic">set</span>)</span>&nbsp;i*)</span><br/>
<span class="id" title="keyword">Definition</span> <a id="_lift" class="idref" href="#_lift"><span class="id" title="definition">_lift</span></a> {<a id="A:30" class="idref" href="#A:30"><span class="id" title="binder">A</span></a> <a id="B:31" class="idref" href="#B:31"><span class="id" title="binder">B</span></a> <a id="C:32" class="idref" href="#C:32"><span class="id" title="binder">C</span></a>} (<a id="get:33" class="idref" href="#get:33"><span class="id" title="binder">get</span></a> : <a class="idref" href="bedrock.prelude.lens.html#A:30"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#B:31"><span class="id" title="variable">B</span></a>) (<a id="set:34" class="idref" href="#set:34"><span class="id" title="binder">set</span></a> : <a class="idref" href="bedrock.prelude.lens.html#B:31"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#A:30"><span class="id" title="variable">A</span></a>) (<a id="l:35" class="idref" href="#l:35"><span class="id" title="binder">l</span></a> : <a class="idref" href="bedrock.prelude.lens.html#B:31"><span class="id" title="variable">B</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <a class="idref" href="bedrock.prelude.lens.html#C:32"><span class="id" title="variable">C</span></a>) : <a class="idref" href="bedrock.prelude.lens.html#A:30"><span class="id" title="variable">A</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <a class="idref" href="bedrock.prelude.lens.html#C:32"><span class="id" title="variable">C</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">lens_compose</span> (<a class="idref" href="bedrock.prelude.lens.html#of_get_put"><span class="id" title="definition">lens.of_get_put</span></a> <a class="idref" href="bedrock.prelude.lens.html#get:33"><span class="id" title="variable">get</span></a> <a class="idref" href="bedrock.prelude.lens.html#set:34"><span class="id" title="variable">set</span></a>) <a class="idref" href="bedrock.prelude.lens.html#l:35"><span class="id" title="variable">l</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="_map_apply" class="idref" href="#_map_apply"><span class="id" title="definition">_map_apply</span></a> {<a id="K:36" class="idref" href="#K:36"><span class="id" title="binder">K</span></a> <a id="V:37" class="idref" href="#V:37"><span class="id" title="binder">V</span></a> <a id="M:38" class="idref" href="#M:38"><span class="id" title="binder">M</span></a>} `{<a id="H:39" class="idref" href="#H:39"><span class="id" title="binder">Insert</span></a> <a id="H:39" class="idref" href="#H:39"><span class="id" title="binder">K</span></a> <a id="H:39" class="idref" href="#H:39"><span class="id" title="binder">V</span></a> <a id="H:39" class="idref" href="#H:39"><span class="id" title="binder">M</span></a>} `{<a id="H0:40" class="idref" href="#H0:40"><span class="id" title="binder">LookupTotal</span></a> <a id="H0:40" class="idref" href="#H0:40"><span class="id" title="binder">K</span></a> <a id="H0:40" class="idref" href="#H0:40"><span class="id" title="binder">V</span></a> <a id="H0:40" class="idref" href="#H0:40"><span class="id" title="binder">M</span></a>} (<a id="k:41" class="idref" href="#k:41"><span class="id" title="binder">k</span></a> : <a class="idref" href="bedrock.prelude.lens.html#K:36"><span class="id" title="variable">K</span></a>) : <a class="idref" href="bedrock.prelude.lens.html#M:38"><span class="id" title="variable">M</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <a class="idref" href="bedrock.prelude.lens.html#V:37"><span class="id" title="variable">V</span></a> :=<br/>
&nbsp;&nbsp;{| <span class="id" title="projection">view</span> <a id="f:42" class="idref" href="#f:42"><span class="id" title="binder">f</span></a> := <a class="idref" href="bedrock.prelude.lens.html#f:42"><span class="id" title="variable">f</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#5a6ec76419c81272088828e5026fff95"><span class="id" title="notation">!!!</span></a> <a class="idref" href="bedrock.prelude.lens.html#k:41"><span class="id" title="variable">k</span></a><br/>
&nbsp;&nbsp;&nbsp;; <span class="id" title="projection">over</span> <a id="upd_f:43" class="idref" href="#upd_f:43"><span class="id" title="binder">upd_f</span></a> <a id="whole_f:44" class="idref" href="#whole_f:44"><span class="id" title="binder">whole_f</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a> <a class="idref" href="bedrock.prelude.lens.html#k:41"><span class="id" title="variable">k</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <a class="idref" href="bedrock.prelude.lens.html#upd_f:43"><span class="id" title="variable">upd_f</span></a> (<a class="idref" href="bedrock.prelude.lens.html#whole_f:44"><span class="id" title="variable">whole_f</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#5a6ec76419c81272088828e5026fff95"><span class="id" title="notation">!!!</span></a> <a class="idref" href="bedrock.prelude.lens.html#k:41"><span class="id" title="variable">k</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">whole_f</span></a><br/>
&nbsp;&nbsp;|}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="_apply" class="idref" href="#_apply"><span class="id" title="definition">_apply</span></a> {<a id="A:45" class="idref" href="#A:45"><span class="id" title="binder">A</span></a> <a id="B:46" class="idref" href="#B:46"><span class="id" title="binder">B</span></a>} `{<a id="EqDecision0:47" class="idref" href="#EqDecision0:47"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:47" class="idref" href="#EqDecision0:47"><span class="id" title="binder">A</span></a>} (<a id="a:48" class="idref" href="#a:48"><span class="id" title="binder">a</span></a> : <a class="idref" href="bedrock.prelude.lens.html#A:45"><span class="id" title="variable">A</span></a>) : <span class="id" title="notation">(</span><a class="idref" href="bedrock.prelude.lens.html#A:45"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#B:46"><span class="id" title="variable">B</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <a class="idref" href="bedrock.prelude.lens.html#B:46"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.lens.html#_map_apply"><span class="id" title="definition">_map_apply</span></a> <a class="idref" href="bedrock.prelude.lens.html#a:48"><span class="id" title="variable">a</span></a>.<br/>

<br/>
</div>

<div class="doc">
If you can lens values <span class="inlinecode"><span class="id" title="var">V</span></span> for any key <span class="inlinecode"><a class="idref" href="bedrock.prelude.avl.html#FMapExtra.MIXIN_LEIBNIZ.K"><span class="id" title="abbreviation">K</span></a></span> out of state <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a></span>,
you can also lens an entire <span class="inlinecode"><a class="idref" href="bedrock.prelude.avl.html#FMapExtra.MIXIN_LEIBNIZ.K"><span class="id" title="abbreviation">K</span></a></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">V</span></span> out of <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a></span>, as long as <span class="inlinecode"><a class="idref" href="bedrock.prelude.avl.html#FMapExtra.MIXIN_LEIBNIZ.K"><span class="id" title="abbreviation">K</span></a></span> is finite. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="_total_fun" class="idref" href="#_total_fun"><span class="id" title="definition">_total_fun</span></a> `{<a id="H:51" class="idref" href="#H:51"><span class="id" title="binder">Finite</span></a> <a id="K:49" class="idref" href="#K:49"><span class="id" title="binder"><span id="H:51" class="id">K</span></span></a>} {<a id="V:52" class="idref" href="#V:52"><span class="id" title="binder">V</span></a> <a id="S:53" class="idref" href="#S:53"><span class="id" title="binder">S</span></a>} (<a id="_key_lens:54" class="idref" href="#_key_lens:54"><span class="id" title="binder">_key_lens</span></a> : <a class="idref" href="bedrock.prelude.lens.html#K:49"><span class="id" title="variable">K</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="bedrock.prelude.lens.html#S:53"><span class="id" title="variable">S</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <a class="idref" href="bedrock.prelude.lens.html#V:52"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>) : <a class="idref" href="bedrock.prelude.lens.html#S:53"><span class="id" title="variable">S</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <span class="id" title="notation">(</span><a class="idref" href="bedrock.prelude.lens.html#K:49"><span class="id" title="variable">K</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#V:52"><span class="id" title="variable">V</span></a><span class="id" title="notation">)</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.lens.html#of_get_set"><span class="id" title="definition">lens.of_get_set</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">位</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="s:62" class="idref" href="#s:62"><span class="id" title="binder">s</span></a> : <a class="idref" href="bedrock.prelude.lens.html#S:53"><span class="id" title="variable">S</span></a>) (<a id="k:63" class="idref" href="#k:63"><span class="id" title="binder">k</span></a> : <a class="idref" href="bedrock.prelude.lens.html#K:49"><span class="id" title="variable">K</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a> <a class="idref" href="bedrock.prelude.lens.html#s:62"><span class="id" title="variable">s</span></a> <span class="id" title="notation">.^</span> <a class="idref" href="bedrock.prelude.lens.html#_key_lens:54"><span class="id" title="variable">_key_lens</span></a> <a class="idref" href="bedrock.prelude.lens.html#k:63"><span class="id" title="variable">k</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">位</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="s0:55" class="idref" href="#s0:55"><span class="id" title="binder">s0</span></a> : <a class="idref" href="bedrock.prelude.lens.html#S:53"><span class="id" title="variable">S</span></a>) (<a id="kv:56" class="idref" href="#kv:56"><span class="id" title="binder">kv</span></a> : <a class="idref" href="bedrock.prelude.lens.html#K:49"><span class="id" title="variable">K</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#V:52"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="set_one_key:61" class="idref" href="#set_one_key:61"><span class="id" title="binder">set_one_key</span></a> (<a id="k:57" class="idref" href="#k:57"><span class="id" title="binder"><span id="k:59" class="id">k</span></span></a> : <a class="idref" href="bedrock.prelude.lens.html#K:49"><span class="id" title="variable">K</span></a>) (<a id="s:58" class="idref" href="#s:58"><span class="id" title="binder"><span id="s:60" class="id">s</span></span></a> : <a class="idref" href="bedrock.prelude.lens.html#S:53"><span class="id" title="variable">S</span></a>) : <a class="idref" href="bedrock.prelude.lens.html#S:53"><span class="id" title="variable">S</span></a> := <a class="idref" href="bedrock.prelude.lens.html#s:58"><span class="id" title="variable">s</span></a> <span class="id" title="notation">&amp;:</span> <a class="idref" href="bedrock.prelude.lens.html#_key_lens:54"><span class="id" title="variable">_key_lens</span></a> <a class="idref" href="bedrock.prelude.lens.html#k:57"><span class="id" title="variable">k</span></a> <span class="id" title="notation">.=</span> <a class="idref" href="bedrock.prelude.lens.html#kv:56"><span class="id" title="variable">kv</span></a> <a class="idref" href="bedrock.prelude.lens.html#k:57"><span class="id" title="variable">k</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.list.html#foldr"><span class="id" title="abbreviation">foldr</span></a> <a class="idref" href="bedrock.prelude.lens.html#set_one_key:61"><span class="id" title="variable">set_one_key</span></a> <a class="idref" href="bedrock.prelude.lens.html#s0:55"><span class="id" title="variable">s0</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.finite.html#enum"><span class="id" title="method">enum</span></a> <a class="idref" href="bedrock.prelude.lens.html#K:49"><span class="id" title="variable">K</span></a>)).<br/>

<br/>
<span class="comment">(*&nbsp;Show&nbsp;that&nbsp;we&nbsp;can&nbsp;remove&nbsp;the&nbsp;abstractions&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">_apply</span></span>&nbsp;and&nbsp;get&nbsp;the&nbsp;old&nbsp;definition.&nbsp;*)</span><br/>
<span class="id" title="keyword">Section</span> <a id="_apply_unfold" class="idref" href="#_apply_unfold"><span class="id" title="section">_apply_unfold</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="view_apply" class="idref" href="#view_apply"><span class="id" title="lemma">view_apply</span></a> {<a id="A:64" class="idref" href="#A:64"><span class="id" title="binder">A</span></a> <a id="B:65" class="idref" href="#B:65"><span class="id" title="binder">B</span></a>} `{<a id="EqDecision0:66" class="idref" href="#EqDecision0:66"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:66" class="idref" href="#EqDecision0:66"><span class="id" title="binder">A</span></a>} (<a id="a:67" class="idref" href="#a:67"><span class="id" title="binder">a</span></a> : <a class="idref" href="bedrock.prelude.lens.html#A:64"><span class="id" title="variable">A</span></a>) (<a id="f:68" class="idref" href="#f:68"><span class="id" title="binder">f</span></a> : <a class="idref" href="bedrock.prelude.lens.html#A:64"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#B:65"><span class="id" title="variable">B</span></a>) : <span class="id" title="projection">view</span> (<a class="idref" href="bedrock.prelude.lens.html#_apply"><span class="id" title="definition">_apply</span></a> <a class="idref" href="bedrock.prelude.lens.html#a:67"><span class="id" title="variable">a</span></a>) <a class="idref" href="bedrock.prelude.lens.html#f:68"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.lens.html#f:68"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.prelude.lens.html#a:67"><span class="id" title="variable">a</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Lemma</span> <a id="over_apply_raw" class="idref" href="#over_apply_raw"><span class="id" title="lemma">over_apply_raw</span></a> {<a id="A:69" class="idref" href="#A:69"><span class="id" title="binder">A</span></a> <a id="B:70" class="idref" href="#B:70"><span class="id" title="binder">B</span></a>} `{<a id="EqDecision0:71" class="idref" href="#EqDecision0:71"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:71" class="idref" href="#EqDecision0:71"><span class="id" title="binder">A</span></a>} (<a id="a:72" class="idref" href="#a:72"><span class="id" title="binder">a</span></a> : <a class="idref" href="bedrock.prelude.lens.html#A:69"><span class="id" title="variable">A</span></a>) (<a id="upd_f:73" class="idref" href="#upd_f:73"><span class="id" title="binder">upd_f</span></a> : <a class="idref" href="bedrock.prelude.lens.html#B:70"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#B:70"><span class="id" title="variable">B</span></a>) <a id="whole_f:74" class="idref" href="#whole_f:74"><span class="id" title="binder">whole_f</span></a> (<a id="x:75" class="idref" href="#x:75"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.prelude.lens.html#A:69"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">over</span> (<a class="idref" href="bedrock.prelude.lens.html#_apply"><span class="id" title="definition">_apply</span></a> <a class="idref" href="bedrock.prelude.lens.html#a:72"><span class="id" title="variable">a</span></a>) <a class="idref" href="bedrock.prelude.lens.html#upd_f:73"><span class="id" title="variable">upd_f</span></a> <a class="idref" href="bedrock.prelude.lens.html#whole_f:74"><span class="id" title="variable">whole_f</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:75"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#decide"><span class="id" title="definition">decide</span></a> (<a class="idref" href="bedrock.prelude.lens.html#a:72"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:75"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="bedrock.prelude.lens.html#upd_f:73"><span class="id" title="variable">upd_f</span></a> (<a class="idref" href="bedrock.prelude.lens.html#whole_f:74"><span class="id" title="variable">whole_f</span></a> <a class="idref" href="bedrock.prelude.lens.html#a:72"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="bedrock.prelude.lens.html#whole_f:74"><span class="id" title="variable">whole_f</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:75"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">done</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="over_apply" class="idref" href="#over_apply"><span class="id" title="lemma">over_apply</span></a> {<a id="A:76" class="idref" href="#A:76"><span class="id" title="binder">A</span></a> <a id="B:77" class="idref" href="#B:77"><span class="id" title="binder">B</span></a>} `{<a id="EqDecision0:78" class="idref" href="#EqDecision0:78"><span class="id" title="binder">EqDecision</span></a> <a id="EqDecision0:78" class="idref" href="#EqDecision0:78"><span class="id" title="binder">A</span></a>} (<a id="a:79" class="idref" href="#a:79"><span class="id" title="binder">a</span></a> : <a class="idref" href="bedrock.prelude.lens.html#A:76"><span class="id" title="variable">A</span></a>) (<a id="upd_f:80" class="idref" href="#upd_f:80"><span class="id" title="binder">upd_f</span></a> : <a class="idref" href="bedrock.prelude.lens.html#B:77"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#B:77"><span class="id" title="variable">B</span></a>) <a id="whole_f:81" class="idref" href="#whole_f:81"><span class="id" title="binder">whole_f</span></a> (<a id="x:82" class="idref" href="#x:82"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.prelude.lens.html#A:76"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">over</span> (<a class="idref" href="bedrock.prelude.lens.html#_apply"><span class="id" title="definition">_apply</span></a> <a class="idref" href="bedrock.prelude.lens.html#a:79"><span class="id" title="variable">a</span></a>) <a class="idref" href="bedrock.prelude.lens.html#upd_f:80"><span class="id" title="variable">upd_f</span></a> <a class="idref" href="bedrock.prelude.lens.html#whole_f:81"><span class="id" title="variable">whole_f</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:82"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#bool_decide"><span class="id" title="definition">bool_decide</span></a> (<a class="idref" href="bedrock.prelude.lens.html#a:79"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:82"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="bedrock.prelude.lens.html#upd_f:80"><span class="id" title="variable">upd_f</span></a> (<a class="idref" href="bedrock.prelude.lens.html#whole_f:81"><span class="id" title="variable">whole_f</span></a> <a class="idref" href="bedrock.prelude.lens.html#a:79"><span class="id" title="variable">a</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.ssr.ssreflect.html#::general_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="bedrock.prelude.lens.html#whole_f:81"><span class="id" title="variable">whole_f</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:82"><span class="id" title="variable">x</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="bedrock.prelude.lens.html#over_apply_raw"><span class="id" title="lemma">over_apply_raw</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.decidable.html#decide_bool_decide"><span class="id" title="lemma">decide_bool_decide</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.prelude.lens.html#_apply_unfold"><span class="id" title="section">_apply_unfold</span></a>.<br/>

<br/>
<span class="comment">(*<br/>
Beware:&nbsp;this&nbsp;is&nbsp;unlikely&nbsp;to&nbsp;satisfy&nbsp;lens&nbsp;laws&nbsp;unless&nbsp;we're&nbsp;dealing&nbsp;with<br/>
"disjoint"&nbsp;lenses.&nbsp;And&nbsp;we'd&nbsp;need&nbsp;a&nbsp;PCM&nbsp;to&nbsp;formalize&nbsp;that.<br/>
Even&nbsp;monoid&nbsp;axioms&nbsp;seem&nbsp;tricky.<br/>
<br/>
But&nbsp;_my_&nbsp;concrete&nbsp;uses&nbsp;seem&nbsp;well-behaved.<br/>
*)</span><br/>
<span class="id" title="keyword">Section</span> <a id="monoid" class="idref" href="#monoid"><span class="id" title="section">monoid</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="monoid.A" class="idref" href="#monoid.A"><span class="id" title="variable">A</span></a> : <span class="id" title="keyword">Type</span>} `{!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#Empty"><span class="id" title="class">Empty</span></a> <span class="id" title="var">M</span>} `{!<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#Union"><span class="id" title="class">Union</span></a> <a class="idref" href="bedrock.prelude.lens.html#M:84"><span class="id" title="variable">M</span></a>}.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="lens_unit" class="idref" href="#lens_unit"><span class="id" title="instance">lens_unit</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#Empty"><span class="id" title="class">Empty</span></a> (<a class="idref" href="bedrock.prelude.lens.html#monoid.A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <a class="idref" href="bedrock.prelude.lens.html#monoid.M"><span class="id" title="variable">M</span></a>) := <a class="idref" href="bedrock.prelude.lens.html#_const"><span class="id" title="definition">_const</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation"></span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="lens_union" class="idref" href="#lens_union"><span class="id" title="instance">lens_union</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#Union"><span class="id" title="class">Union</span></a> (<a class="idref" href="bedrock.prelude.lens.html#monoid.A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <a class="idref" href="bedrock.prelude.lens.html#monoid.M"><span class="id" title="variable">M</span></a>) := <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">位</span></a> <a id="l1:87" class="idref" href="#l1:87"><span class="id" title="binder">l1</span></a> <a id="l2:88" class="idref" href="#l2:88"><span class="id" title="binder">l2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">Build_Lens</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">位</span></a> <a id="a:91" class="idref" href="#a:91"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.lens.html#a:91"><span class="id" title="variable">a</span></a> <span class="id" title="notation">.^</span> <a class="idref" href="bedrock.prelude.lens.html#l1:87"><span class="id" title="variable">l1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#e8953ae2b2281f9c2fbbd0d5d6e30fd3"><span class="id" title="notation"></span></a> <a class="idref" href="bedrock.prelude.lens.html#a:91"><span class="id" title="variable">a</span></a> <span class="id" title="notation">.^</span> <a class="idref" href="bedrock.prelude.lens.html#l2:88"><span class="id" title="variable">l2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">位</span></a> <a id="upd:89" class="idref" href="#upd:89"><span class="id" title="binder">upd</span></a> <a id="s:90" class="idref" href="#s:90"><span class="id" title="binder">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.lens.html#s:90"><span class="id" title="variable">s</span></a> <span class="id" title="notation">&amp;:</span> <a class="idref" href="bedrock.prelude.lens.html#l1:87"><span class="id" title="variable">l1</span></a> <span class="id" title="notation">%=</span> <a class="idref" href="bedrock.prelude.lens.html#upd:89"><span class="id" title="variable">upd</span></a> <span class="id" title="notation">&amp;:</span> <a class="idref" href="bedrock.prelude.lens.html#l2:88"><span class="id" title="variable">l2</span></a> <span class="id" title="notation">%=</span> <a class="idref" href="bedrock.prelude.lens.html#upd:89"><span class="id" title="variable">upd</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="bedrock.prelude.axioms.funext.html#"><span class="id" title="module">bedrock.prelude.axioms.funext</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="lens_left_id" class="idref" href="#lens_left_id"><span class="id" title="instance">lens_left_id</span></a> `{<a id="LeftId0:92" class="idref" href="#LeftId0:92"><span class="id" title="binder">!</span></a><a id="LeftId0:92" class="idref" href="#LeftId0:92"><span class="id" title="binder">LeftId</span></a> <a id="LeftId0:92" class="idref" href="#LeftId0:92"><span class="id" title="binder">(=@{</span></a><a id="LeftId0:92" class="idref" href="#LeftId0:92"><span class="id" title="binder">M</span></a><a id="LeftId0:92" class="idref" href="#LeftId0:92"><span class="id" title="binder">})</span></a> <a id="LeftId0:92" class="idref" href="#LeftId0:92"><span class="id" title="binder"></span></a> <a id="LeftId0:92" class="idref" href="#LeftId0:92"><span class="id" title="binder">()</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#LeftId"><span class="id" title="class">LeftId</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#004e1afed1cd7c7c13e065ebaf1bfeff"><span class="id" title="notation">(=@{</span></a><a class="idref" href="bedrock.prelude.lens.html#monoid.A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <a class="idref" href="bedrock.prelude.lens.html#monoid.M"><span class="id" title="variable">M</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#004e1afed1cd7c7c13e065ebaf1bfeff"><span class="id" title="notation">})</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation"></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#8742fd8c92c3528c3c12cbbbb7d5e051"><span class="id" title="notation">()</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.prelude.lens.html#lens_unit"><span class="id" title="instance">lens_unit</span></a> /<a class="idref" href="bedrock.prelude.lens.html#lens_union"><span class="id" title="instance">lens_union</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#empty"><span class="id" title="definition">empty</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#union"><span class="id" title="definition">union</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt;[<span class="id" title="var">v</span> <span class="id" title="var">o</span>] /=; <span class="id" title="var">f_equiv</span>; <span class="id" title="var">funext</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#left_id_L"><span class="id" title="lemma">left_id_L</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="lens_right_id" class="idref" href="#lens_right_id"><span class="id" title="instance">lens_right_id</span></a> `{<a id="RightId0:93" class="idref" href="#RightId0:93"><span class="id" title="binder">!</span></a><a id="RightId0:93" class="idref" href="#RightId0:93"><span class="id" title="binder">RightId</span></a> <a id="RightId0:93" class="idref" href="#RightId0:93"><span class="id" title="binder">(=@{</span></a><a id="RightId0:93" class="idref" href="#RightId0:93"><span class="id" title="binder">M</span></a><a id="RightId0:93" class="idref" href="#RightId0:93"><span class="id" title="binder">})</span></a> <a id="RightId0:93" class="idref" href="#RightId0:93"><span class="id" title="binder"></span></a> <a id="RightId0:93" class="idref" href="#RightId0:93"><span class="id" title="binder">()</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#RightId"><span class="id" title="class">RightId</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#004e1afed1cd7c7c13e065ebaf1bfeff"><span class="id" title="notation">(=@{</span></a><a class="idref" href="bedrock.prelude.lens.html#monoid.A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <a class="idref" href="bedrock.prelude.lens.html#monoid.M"><span class="id" title="variable">M</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#004e1afed1cd7c7c13e065ebaf1bfeff"><span class="id" title="notation">})</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#c25a9c7b1a4bc0f91edca9e331dd7eee"><span class="id" title="notation"></span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#8742fd8c92c3528c3c12cbbbb7d5e051"><span class="id" title="notation">()</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.prelude.lens.html#lens_unit"><span class="id" title="instance">lens_unit</span></a> /<a class="idref" href="bedrock.prelude.lens.html#lens_union"><span class="id" title="instance">lens_union</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#empty"><span class="id" title="definition">empty</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#union"><span class="id" title="definition">union</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt;[<span class="id" title="var">v</span> <span class="id" title="var">o</span>] /=; <span class="id" title="var">f_equiv</span>; <span class="id" title="var">funext</span>; <span class="id" title="var">last</span> <span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#right_id_L"><span class="id" title="lemma">right_id_L</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="lens_assoc" class="idref" href="#lens_assoc"><span class="id" title="instance">lens_assoc</span></a> `{<a id="Assoc0:94" class="idref" href="#Assoc0:94"><span class="id" title="binder">!</span></a><a id="Assoc0:94" class="idref" href="#Assoc0:94"><span class="id" title="binder">Assoc</span></a> <a id="Assoc0:94" class="idref" href="#Assoc0:94"><span class="id" title="binder">(=@{</span></a><a id="Assoc0:94" class="idref" href="#Assoc0:94"><span class="id" title="binder">M</span></a><a id="Assoc0:94" class="idref" href="#Assoc0:94"><span class="id" title="binder">})</span></a> <a id="Assoc0:94" class="idref" href="#Assoc0:94"><span class="id" title="binder">()</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#Assoc"><span class="id" title="class">Assoc</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#004e1afed1cd7c7c13e065ebaf1bfeff"><span class="id" title="notation">(=@{</span></a><a class="idref" href="bedrock.prelude.lens.html#monoid.A"><span class="id" title="variable">A</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <a class="idref" href="bedrock.prelude.lens.html#monoid.M"><span class="id" title="variable">M</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#004e1afed1cd7c7c13e065ebaf1bfeff"><span class="id" title="notation">})</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#8742fd8c92c3528c3c12cbbbb7d5e051"><span class="id" title="notation">()</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="bedrock.prelude.lens.html#lens_unit"><span class="id" title="instance">lens_unit</span></a> /<a class="idref" href="bedrock.prelude.lens.html#lens_union"><span class="id" title="instance">lens_union</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#empty"><span class="id" title="definition">empty</span></a> /<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#union"><span class="id" title="definition">union</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>=&gt;<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> /=; <span class="id" title="var">f_equiv</span>; <span class="id" title="var">funext</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#assoc_L"><span class="id" title="lemma">assoc_L</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.prelude.lens.html#monoid"><span class="id" title="section">monoid</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="iso" class="idref" href="#iso"><span class="id" title="module">iso</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="iso.t" class="idref" href="#iso.t"><span class="id" title="record">t</span></a> {<a id="A:95" class="idref" href="#A:95"><span class="id" title="binder">A</span></a> <a id="B:96" class="idref" href="#B:96"><span class="id" title="binder">B</span></a>} := <span class="id" title="var">Mk</span> { <a id="iso.f" class="idref" href="#iso.f"><span class="id" title="projection">f</span></a> : <a class="idref" href="bedrock.prelude.lens.html#A:95"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#B:96"><span class="id" title="variable">B</span></a> ; <a id="iso.g" class="idref" href="#iso.g"><span class="id" title="projection">g</span></a> : <a class="idref" href="bedrock.prelude.lens.html#B:96"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#A:95"><span class="id" title="variable">A</span></a> }.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.prelude.lens.html#iso.t"><span class="id" title="record">t</span></a> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="var">Arguments</span> <a class="idref" href="bedrock.prelude.lens.html#iso.Mk"><span class="id" title="constructor">Mk</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span> : <span class="id" title="tactic">assert</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;these&nbsp;should&nbsp;be&nbsp;<span class="inlinecode"><span class="id" title="var">Cancel</span></span>&nbsp;instances.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="iso.lawsT" class="idref" href="#iso.lawsT"><span class="id" title="record">lawsT</span></a> {<a id="A:100" class="idref" href="#A:100"><span class="id" title="binder">A</span></a> <a id="B:101" class="idref" href="#B:101"><span class="id" title="binder">B</span></a>} (<a id="l:102" class="idref" href="#l:102"><span class="id" title="binder">l</span></a> : <a class="idref" href="bedrock.prelude.lens.html#iso.t"><span class="id" title="record">iso.t</span></a> <a class="idref" href="bedrock.prelude.lens.html#A:100"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.prelude.lens.html#B:101"><span class="id" title="variable">B</span></a>) : <span class="id" title="keyword">Prop</span> := <span class="id" title="var">MkLaws</span><br/>
&nbsp;&nbsp;{ <a id="iso.f_g" class="idref" href="#iso.f_g"><span class="id" title="projection">f_g</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation"></span></a> <a id="b:104" class="idref" href="#b:104"><span class="id" title="binder">b</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.lens.html#l:102"><span class="id" title="variable">l</span></a>.(<a class="idref" href="bedrock.prelude.lens.html#iso.f"><span class="id" title="projection">f</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="bedrock.prelude.lens.html#l:102"><span class="id" title="variable">l</span></a>.(<a class="idref" href="bedrock.prelude.lens.html#iso.g"><span class="id" title="projection">g</span></a>) <a class="idref" href="bedrock.prelude.lens.html#b:104"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.lens.html#b:104"><span class="id" title="variable">b</span></a><br/>
&nbsp;&nbsp;; <a id="iso.g_f" class="idref" href="#iso.g_f"><span class="id" title="projection">g_f</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation"></span></a> <a id="a:106" class="idref" href="#a:106"><span class="id" title="binder">a</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.lens.html#l:102"><span class="id" title="variable">l</span></a>.(<a class="idref" href="bedrock.prelude.lens.html#iso.g"><span class="id" title="projection">g</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp//stdpp.base.html#547692780023ef044153bc0c4f871ef7"><span class="id" title="notation">$</span></a> <a class="idref" href="bedrock.prelude.lens.html#l:102"><span class="id" title="variable">l</span></a>.(<a class="idref" href="bedrock.prelude.lens.html#iso.f"><span class="id" title="projection">f</span></a>) <a class="idref" href="bedrock.prelude.lens.html#a:106"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.lens.html#a:106"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="iso.inv" class="idref" href="#iso.inv"><span class="id" title="definition">inv</span></a> {<a id="A:108" class="idref" href="#A:108"><span class="id" title="binder">A</span></a> <a id="B:109" class="idref" href="#B:109"><span class="id" title="binder">B</span></a>} (<a id="iso:110" class="idref" href="#iso:110"><span class="id" title="binder">iso</span></a> : <a class="idref" href="bedrock.prelude.lens.html#iso.t"><span class="id" title="record">iso.t</span></a> <a class="idref" href="bedrock.prelude.lens.html#A:108"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.prelude.lens.html#B:109"><span class="id" title="variable">B</span></a>) : <a class="idref" href="bedrock.prelude.lens.html#iso.t"><span class="id" title="record">iso.t</span></a> <a class="idref" href="bedrock.prelude.lens.html#B:109"><span class="id" title="variable">B</span></a> <a class="idref" href="bedrock.prelude.lens.html#A:108"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.lens.html#iso.Mk"><span class="id" title="constructor">Mk</span></a> <a class="idref" href="bedrock.prelude.lens.html#iso:110"><span class="id" title="variable">iso</span></a>.(<a class="idref" href="bedrock.prelude.lens.html#iso.g"><span class="id" title="projection">g</span></a>) <a class="idref" href="bedrock.prelude.lens.html#iso:110"><span class="id" title="variable">iso</span></a>.(<a class="idref" href="bedrock.prelude.lens.html#iso.f"><span class="id" title="projection">f</span></a>).<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.prelude.lens.html#iso"><span class="id" title="module">iso</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="iso2lens" class="idref" href="#iso2lens"><span class="id" title="definition">iso2lens</span></a> {<a id="A:111" class="idref" href="#A:111"><span class="id" title="binder">A</span></a> <a id="B:112" class="idref" href="#B:112"><span class="id" title="binder">B</span></a>} (<a id="i:113" class="idref" href="#i:113"><span class="id" title="binder">i</span></a> : <a class="idref" href="bedrock.prelude.lens.html#t"><span class="id" title="record">iso.t</span></a> <a class="idref" href="bedrock.prelude.lens.html#A:111"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.prelude.lens.html#B:112"><span class="id" title="variable">B</span></a>) : <a class="idref" href="bedrock.prelude.lens.html#A:111"><span class="id" title="variable">A</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <a class="idref" href="bedrock.prelude.lens.html#B:112"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.lens.html#of_get_put"><span class="id" title="definition">lens.of_get_put</span></a> (<a class="idref" href="bedrock.prelude.lens.html#f"><span class="id" title="projection">iso.f</span></a> <a class="idref" href="bedrock.prelude.lens.html#i:113"><span class="id" title="variable">i</span></a>) (<a class="idref" href="bedrock.prelude.lens.html#g"><span class="id" title="projection">iso.g</span></a> <a class="idref" href="bedrock.prelude.lens.html#i:113"><span class="id" title="variable">i</span></a>).<br/>

<br/>
</div>

<div class="doc">
Lens laws for monomorphic lenses <span class="inlinecode"><a class="idref" href="bedrock.prelude.elpi.derive_test.html#BitsetTest.A"><span class="id" title="constructor">A</span></a></span> <span class="inlinecode">-<span class="id" title="var">l</span>&gt;</span> <span class="inlinecode"><a class="idref" href="bedrock.prelude.elpi.derive_test.html#BitsetTest.B"><span class="id" title="constructor">B</span></a></span>.
Provisional; these are useful as a sanity checks, but no inference convenience
is provided.

<div class="paragraph"> </div>

TODO FM-1193 for a proper solution.

</div>
<div class="code">
<span class="id" title="keyword">Record</span> <a id="LensLaws'" class="idref" href="#LensLaws'"><span class="id" title="record">LensLaws'</span></a> {<a id="A:114" class="idref" href="#A:114"><span class="id" title="binder">A</span></a> <a id="B:115" class="idref" href="#B:115"><span class="id" title="binder">B</span></a>} {<a id="R:116" class="idref" href="#R:116"><span class="id" title="binder">R</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="bedrock.prelude.lens.html#A:114"><span class="id" title="variable">A</span></a>} {<a id="S:117" class="idref" href="#S:117"><span class="id" title="binder">S</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> <a class="idref" href="bedrock.prelude.lens.html#B:115"><span class="id" title="variable">B</span></a>} {<a id="l:118" class="idref" href="#l:118"><span class="id" title="binder">l</span></a> : <a class="idref" href="bedrock.prelude.lens.html#A:114"><span class="id" title="variable">A</span></a> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <a class="idref" href="bedrock.prelude.lens.html#B:115"><span class="id" title="variable">B</span></a>} := <span class="id" title="var">MkLensLaws</span><br/>
{ <a id="view_over" class="idref" href="#view_over"><span class="id" title="projection">view_over</span></a> <a id="upd:120" class="idref" href="#upd:120"><span class="id" title="binder">upd</span></a> <a id="x:121" class="idref" href="#x:121"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.prelude.lens.html#S:117"><span class="id" title="variable">S</span></a> (<span class="id" title="projection">view</span> <a class="idref" href="bedrock.prelude.lens.html#l:118"><span class="id" title="variable">l</span></a> (<span class="id" title="projection">over</span> <a class="idref" href="bedrock.prelude.lens.html#l:118"><span class="id" title="variable">l</span></a> <a class="idref" href="bedrock.prelude.lens.html#upd:120"><span class="id" title="variable">upd</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:121"><span class="id" title="variable">x</span></a>)) (<a class="idref" href="bedrock.prelude.lens.html#upd:120"><span class="id" title="variable">upd</span></a> (<span class="id" title="projection">view</span> <a class="idref" href="bedrock.prelude.lens.html#l:118"><span class="id" title="variable">l</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:121"><span class="id" title="variable">x</span></a>))<br/>
; <a id="view_set" class="idref" href="#view_set"><span class="id" title="projection">view_set</span></a> <a id="x:123" class="idref" href="#x:123"><span class="id" title="binder">x</span></a> <a id="v:124" class="idref" href="#v:124"><span class="id" title="binder">v</span></a> : <a class="idref" href="bedrock.prelude.lens.html#S:117"><span class="id" title="variable">S</span></a> (<span class="id" title="projection">view</span> <a class="idref" href="bedrock.prelude.lens.html#l:118"><span class="id" title="variable">l</span></a> (<span class="id" title="definition">set</span> <a class="idref" href="bedrock.prelude.lens.html#l:118"><span class="id" title="variable">l</span></a> <a class="idref" href="bedrock.prelude.lens.html#v:124"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:123"><span class="id" title="variable">x</span></a>)) <a class="idref" href="bedrock.prelude.lens.html#v:124"><span class="id" title="variable">v</span></a><br/>
; <a id="set_view" class="idref" href="#set_view"><span class="id" title="projection">set_view</span></a> <a id="x:126" class="idref" href="#x:126"><span class="id" title="binder">x</span></a> : <a class="idref" href="bedrock.prelude.lens.html#R:116"><span class="id" title="variable">R</span></a> (<span class="id" title="definition">set</span> <a class="idref" href="bedrock.prelude.lens.html#l:118"><span class="id" title="variable">l</span></a> (<span class="id" title="projection">view</span> <a class="idref" href="bedrock.prelude.lens.html#l:118"><span class="id" title="variable">l</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:126"><span class="id" title="variable">x</span></a>) <a class="idref" href="bedrock.prelude.lens.html#x:126"><span class="id" title="variable">x</span></a>) <a class="idref" href="bedrock.prelude.lens.html#x:126"><span class="id" title="variable">x</span></a><br/>
; <a id="set_set" class="idref" href="#set_set"><span class="id" title="projection">set_set</span></a> <a id="x:128" class="idref" href="#x:128"><span class="id" title="binder">x</span></a> <a id="v:129" class="idref" href="#v:129"><span class="id" title="binder">v</span></a> <a id="v':130" class="idref" href="#v':130"><span class="id" title="binder">v'</span></a> : <a class="idref" href="bedrock.prelude.lens.html#R:116"><span class="id" title="variable">R</span></a> (<span class="id" title="definition">set</span> <a class="idref" href="bedrock.prelude.lens.html#l:118"><span class="id" title="variable">l</span></a> <a class="idref" href="bedrock.prelude.lens.html#v':130"><span class="id" title="variable">v'</span></a> (<span class="id" title="definition">set</span> <a class="idref" href="bedrock.prelude.lens.html#l:118"><span class="id" title="variable">l</span></a> <a class="idref" href="bedrock.prelude.lens.html#v:129"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:128"><span class="id" title="variable">x</span></a>)) (<span class="id" title="definition">set</span> <a class="idref" href="bedrock.prelude.lens.html#l:118"><span class="id" title="variable">l</span></a> <a class="idref" href="bedrock.prelude.lens.html#v':130"><span class="id" title="variable">v'</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:128"><span class="id" title="variable">x</span></a>)<br/>
}.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="bedrock.prelude.lens.html#LensLaws'"><span class="id" title="record">LensLaws'</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} <span class="id" title="var">R</span> <span class="id" title="var">S</span> <span class="id" title="var">l</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="iso2lens_laws" class="idref" href="#iso2lens_laws"><span class="id" title="lemma">iso2lens_laws</span></a> {<a id="A:132" class="idref" href="#A:132"><span class="id" title="binder">A</span></a> <a id="B:133" class="idref" href="#B:133"><span class="id" title="binder">B</span></a>} (<a id="i:134" class="idref" href="#i:134"><span class="id" title="binder">i</span></a> : <a class="idref" href="bedrock.prelude.lens.html#t"><span class="id" title="record">iso.t</span></a> <a class="idref" href="bedrock.prelude.lens.html#A:132"><span class="id" title="variable">A</span></a> <a class="idref" href="bedrock.prelude.lens.html#B:133"><span class="id" title="variable">B</span></a>) (<a id="Hl:135" class="idref" href="#Hl:135"><span class="id" title="binder">Hl</span></a> : <a class="idref" href="bedrock.prelude.lens.html#lawsT"><span class="id" title="record">iso.lawsT</span></a> <a class="idref" href="bedrock.prelude.lens.html#i:134"><span class="id" title="variable">i</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.lens.html#LensLaws'"><span class="id" title="record">LensLaws'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> (<a class="idref" href="bedrock.prelude.lens.html#iso2lens"><span class="id" title="definition">iso2lens</span></a> <a class="idref" href="bedrock.prelude.lens.html#i:134"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">case</span>: <span class="id" title="var">i</span> <span class="id" title="var">Hl</span> =&gt; <span class="id" title="var">f</span> <span class="id" title="var">g</span> [/= <span class="id" title="var">f_g</span> <span class="id" title="var">g_f</span>]; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">simpl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="_constr" class="idref" href="#_constr"><span class="id" title="section">_constr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="_constr.A1" class="idref" href="#_constr.A1"><span class="id" title="variable">A1</span></a> <a id="_constr.A2" class="idref" href="#_constr.A2"><span class="id" title="variable">A2</span></a> <a id="_constr.B" class="idref" href="#_constr.B"><span class="id" title="variable">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="_constr.constr" class="idref" href="#_constr.constr"><span class="id" title="variable">constr</span></a> : <a class="idref" href="bedrock.prelude.lens.html#A1:136"><span class="id" title="variable">A1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#A2:137"><span class="id" title="variable">A2</span></a>) (<a id="_constr.inv" class="idref" href="#_constr.inv"><span class="id" title="variable">inv</span></a> : <a class="idref" href="bedrock.prelude.lens.html#A2:137"><span class="id" title="variable">A2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="bedrock.prelude.lens.html#A1:136"><span class="id" title="variable">A1</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="_constr" class="idref" href="#_constr"><span class="id" title="definition">_constr</span></a> : <span class="id" title="notation">(</span><a class="idref" href="bedrock.prelude.lens.html#_constr.A2"><span class="id" title="variable">A2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#_constr.B"><span class="id" title="variable">B</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">-</span><span class="id" title="notation">l</span><span class="id" title="notation">&gt;</span> <span class="id" title="notation">(</span><a class="idref" href="bedrock.prelude.lens.html#_constr.A1"><span class="id" title="variable">A1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#_constr.B"><span class="id" title="variable">B</span></a><span class="id" title="notation">)</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id" title="projection">view</span> <a id="f:141" class="idref" href="#f:141"><span class="id" title="binder">f</span></a> <a id="r:142" class="idref" href="#r:142"><span class="id" title="binder">r</span></a> := <a class="idref" href="bedrock.prelude.lens.html#f:141"><span class="id" title="variable">f</span></a> (<a class="idref" href="bedrock.prelude.lens.html#_constr.constr"><span class="id" title="variable">constr</span></a> <a class="idref" href="bedrock.prelude.lens.html#r:142"><span class="id" title="variable">r</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="projection">over</span> <a id="upd_f:143" class="idref" href="#upd_f:143"><span class="id" title="binder">upd_f</span></a> <a id="whole_f:144" class="idref" href="#whole_f:144"><span class="id" title="binder">whole_f</span></a> <a id="r:145" class="idref" href="#r:145"><span class="id" title="binder">r</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="bedrock.prelude.lens.html#_constr.inv"><span class="id" title="variable">inv</span></a> <a class="idref" href="bedrock.prelude.lens.html#r:145"><span class="id" title="variable">r</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">gr</span> =&gt; <a class="idref" href="bedrock.prelude.lens.html#upd_f:143"><span class="id" title="variable">upd_f</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">位</span></a> <a id="r:146" class="idref" href="#r:146"><span class="id" title="binder">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.lens.html#whole_f:144"><span class="id" title="variable">whole_f</span></a> (<a class="idref" href="bedrock.prelude.lens.html#_constr.constr"><span class="id" title="variable">constr</span></a> <a class="idref" href="bedrock.prelude.lens.html#r:146"><span class="id" title="variable">r</span></a>)) <span class="id" title="var">gr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="bedrock.prelude.lens.html#whole_f:144"><span class="id" title="variable">whole_f</span></a> <a class="idref" href="bedrock.prelude.lens.html#r:145"><span class="id" title="variable">r</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> |}.<br/>
&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;As&nbsp;a&nbsp;test,&nbsp;prove&nbsp;lens&nbsp;laws&nbsp;from<br/>
&nbsp;&nbsp;https://hackage.haskell.org/package/lens-5.0.1/docs/Control-Lens-Lens.html<br/>
&nbsp;&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="constr_view_over" class="idref" href="#constr_view_over"><span class="id" title="lemma">constr_view_over</span></a> <a id="f:147" class="idref" href="#f:147"><span class="id" title="binder">f</span></a> <a id="upd:148" class="idref" href="#upd:148"><span class="id" title="binder">upd</span></a> <a id="a1:149" class="idref" href="#a1:149"><span class="id" title="binder">a1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinv1:151" class="idref" href="#Hinv1:151"><span class="id" title="binder">Hinv1</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation"></span></a> <a id="x:150" class="idref" href="#x:150"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.lens.html#_constr.inv"><span class="id" title="variable">inv</span></a> (<a class="idref" href="bedrock.prelude.lens.html#_constr.constr"><span class="id" title="variable">constr</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:150"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:150"><span class="id" title="variable">x</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">view</span> <a class="idref" href="bedrock.prelude.lens.html#_constr"><span class="id" title="definition">_constr</span></a> (<span class="id" title="projection">over</span> <a class="idref" href="bedrock.prelude.lens.html#_constr"><span class="id" title="definition">_constr</span></a> <a class="idref" href="bedrock.prelude.lens.html#upd:148"><span class="id" title="variable">upd</span></a> <a class="idref" href="bedrock.prelude.lens.html#f:147"><span class="id" title="variable">f</span></a>) <a class="idref" href="bedrock.prelude.lens.html#a1:149"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.lens.html#upd:148"><span class="id" title="variable">upd</span></a> (<span class="id" title="projection">view</span> <a class="idref" href="bedrock.prelude.lens.html#_constr"><span class="id" title="definition">_constr</span></a> <a class="idref" href="bedrock.prelude.lens.html#f:147"><span class="id" title="variable">f</span></a>) <a class="idref" href="bedrock.prelude.lens.html#a1:149"><span class="id" title="variable">a1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">cbv</span>. <span class="id" title="tactic">move</span>: <span class="id" title="var">Hinv1</span> =&gt; /(<span class="id" title="var">_</span> <span class="id" title="var">a1</span>). <span class="id" title="tactic">by</span> <span class="id" title="tactic">case</span>: (<a class="idref" href="bedrock.prelude.lens.html#_constr.inv"><span class="id" title="variable">inv</span></a> <span class="id" title="var">_</span>) =&gt; [<span class="id" title="var">a</span> [-&gt;]|]. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;view&nbsp;l&nbsp;(set&nbsp;l&nbsp;v&nbsp;s)&nbsp;&nbsp;&nbsp;v&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="constr_view_set" class="idref" href="#constr_view_set"><span class="id" title="lemma">constr_view_set</span></a> <a id="f:152" class="idref" href="#f:152"><span class="id" title="binder">f</span></a> <a id="a1:153" class="idref" href="#a1:153"><span class="id" title="binder">a1</span></a> <a id="v:154" class="idref" href="#v:154"><span class="id" title="binder">v</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinv1:156" class="idref" href="#Hinv1:156"><span class="id" title="binder">Hinv1</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation"></span></a> <a id="x:155" class="idref" href="#x:155"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.lens.html#_constr.inv"><span class="id" title="variable">inv</span></a> (<a class="idref" href="bedrock.prelude.lens.html#_constr.constr"><span class="id" title="variable">constr</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:155"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:155"><span class="id" title="variable">x</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="projection">view</span> <a class="idref" href="bedrock.prelude.lens.html#_constr"><span class="id" title="definition">_constr</span></a> (<span class="id" title="definition">set</span> <a class="idref" href="bedrock.prelude.lens.html#_constr"><span class="id" title="definition">_constr</span></a> <a class="idref" href="bedrock.prelude.lens.html#v:154"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.prelude.lens.html#f:152"><span class="id" title="variable">f</span></a>) <a class="idref" href="bedrock.prelude.lens.html#a1:153"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.lens.html#v:154"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.prelude.lens.html#a1:153"><span class="id" title="variable">a1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="bedrock.prelude.lens.html#constr_view_over"><span class="id" title="lemma">constr_view_over</span></a>, <span class="id" title="var">Hinv1</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;set&nbsp;l&nbsp;(view&nbsp;l&nbsp;s)&nbsp;s&nbsp;&nbsp;s&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="constr_set_view" class="idref" href="#constr_set_view"><span class="id" title="lemma">constr_set_view</span></a> <a id="f:157" class="idref" href="#f:157"><span class="id" title="binder">f</span></a> <a id="a2:158" class="idref" href="#a2:158"><span class="id" title="binder">a2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinv2:161" class="idref" href="#Hinv2:161"><span class="id" title="binder">Hinv2</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation"></span></a> <a id="a1:159" class="idref" href="#a1:159"><span class="id" title="binder">a1</span></a> <a id="a2:160" class="idref" href="#a2:160"><span class="id" title="binder">a2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.lens.html#_constr.inv"><span class="id" title="variable">inv</span></a> <a class="idref" href="bedrock.prelude.lens.html#a2:160"><span class="id" title="variable">a2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.prelude.lens.html#a1:159"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#_constr.constr"><span class="id" title="variable">constr</span></a> <a class="idref" href="bedrock.prelude.lens.html#a1:159"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.lens.html#a2:160"><span class="id" title="variable">a2</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">set</span> <a class="idref" href="bedrock.prelude.lens.html#_constr"><span class="id" title="definition">_constr</span></a> (<span class="id" title="projection">view</span> <a class="idref" href="bedrock.prelude.lens.html#_constr"><span class="id" title="definition">_constr</span></a> <a class="idref" href="bedrock.prelude.lens.html#f:157"><span class="id" title="variable">f</span></a>) <a class="idref" href="bedrock.prelude.lens.html#f:157"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.prelude.lens.html#a2:158"><span class="id" title="variable">a2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.lens.html#f:157"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.prelude.lens.html#a2:158"><span class="id" title="variable">a2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">cbv</span>. <span class="id" title="tactic">case</span> <span class="id" title="var">E</span>: (<a class="idref" href="bedrock.prelude.lens.html#_constr.inv"><span class="id" title="variable">inv</span></a> <span class="id" title="var">_</span>) =&gt; [<span class="id" title="var">a1</span>|//]. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">Hinv2</span> <span class="id" title="var">a1</span> <span class="id" title="var">a2</span>). <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;set&nbsp;l&nbsp;v'&nbsp;(set&nbsp;l&nbsp;v&nbsp;s)&nbsp;&nbsp;set&nbsp;l&nbsp;v'&nbsp;s&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="constr_set_set" class="idref" href="#constr_set_set"><span class="id" title="lemma">constr_set_set</span></a> <a id="f:162" class="idref" href="#f:162"><span class="id" title="binder">f</span></a> <a id="v:163" class="idref" href="#v:163"><span class="id" title="binder">v</span></a> <a id="v':164" class="idref" href="#v':164"><span class="id" title="binder">v'</span></a> <a id="a2:165" class="idref" href="#a2:165"><span class="id" title="binder">a2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">set</span> <a class="idref" href="bedrock.prelude.lens.html#_constr"><span class="id" title="definition">_constr</span></a> <a class="idref" href="bedrock.prelude.lens.html#v':164"><span class="id" title="variable">v'</span></a> (<span class="id" title="definition">set</span> <a class="idref" href="bedrock.prelude.lens.html#_constr"><span class="id" title="definition">_constr</span></a> <a class="idref" href="bedrock.prelude.lens.html#v:163"><span class="id" title="variable">v</span></a> <a class="idref" href="bedrock.prelude.lens.html#f:162"><span class="id" title="variable">f</span></a>) <a class="idref" href="bedrock.prelude.lens.html#a2:165"><span class="id" title="variable">a2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="definition">set</span> <a class="idref" href="bedrock.prelude.lens.html#_constr"><span class="id" title="definition">_constr</span></a> <a class="idref" href="bedrock.prelude.lens.html#v':164"><span class="id" title="variable">v'</span></a> <a class="idref" href="bedrock.prelude.lens.html#f:162"><span class="id" title="variable">f</span></a> <a class="idref" href="bedrock.prelude.lens.html#a2:165"><span class="id" title="variable">a2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">cbv</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">case_match</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="constr_laws" class="idref" href="#constr_laws"><span class="id" title="lemma">constr_laws</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinv1:167" class="idref" href="#Hinv1:167"><span class="id" title="binder">Hinv1</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation"></span></a> <a id="x:166" class="idref" href="#x:166"><span class="id" title="binder">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.lens.html#_constr.inv"><span class="id" title="variable">inv</span></a> (<a class="idref" href="bedrock.prelude.lens.html#_constr.constr"><span class="id" title="variable">constr</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:166"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.prelude.lens.html#x:166"><span class="id" title="variable">x</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="Hinv2:170" class="idref" href="#Hinv2:170"><span class="id" title="binder">Hinv2</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation"></span></a> <a id="a1:168" class="idref" href="#a1:168"><span class="id" title="binder">a1</span></a> <a id="a2:169" class="idref" href="#a2:169"><span class="id" title="binder">a2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="bedrock.prelude.lens.html#_constr.inv"><span class="id" title="variable">inv</span></a> <a class="idref" href="bedrock.prelude.lens.html#a2:169"><span class="id" title="variable">a2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="bedrock.prelude.lens.html#a1:168"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="bedrock.prelude.lens.html#_constr.constr"><span class="id" title="variable">constr</span></a> <a class="idref" href="bedrock.prelude.lens.html#a1:168"><span class="id" title="variable">a1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="bedrock.prelude.lens.html#a2:169"><span class="id" title="variable">a2</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="bedrock.prelude.lens.html#LensLaws'"><span class="id" title="record">LensLaws'</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0+alpha/stdlib//Stdlib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) <a class="idref" href="bedrock.prelude.lens.html#_constr"><span class="id" title="definition">_constr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> * ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span>: <a class="idref" href="bedrock.prelude.lens.html#constr_view_over"><span class="id" title="lemma">constr_view_over</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span>: <a class="idref" href="bedrock.prelude.lens.html#constr_view_set"><span class="id" title="lemma">constr_view_set</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">exact</span>: <a class="idref" href="bedrock.prelude.lens.html#constr_set_view"><span class="id" title="lemma">constr_set_view</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span>: <a class="idref" href="bedrock.prelude.lens.html#constr_set_set"><span class="id" title="lemma">constr_set_set</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="bedrock.prelude.lens.html#_constr"><span class="id" title="section">_constr</span></a>.<br/>
</div>
<!--
-- Copyright (c) 2020 BedRock Systems, Inc.
-- This software is distributed under the terms of the BedRock Open-Source License.
-- See the LICENSE-BedRock file in the repository root for details.
-->

<!--
-- SPDX-LIcense-Identifier:BSD-2-Clause
-->
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
